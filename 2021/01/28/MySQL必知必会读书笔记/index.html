<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="MySQL必知必会读书笔记"><meta name="keywords" content="数据库,读书笔记"><meta name="author" content="恒若时光"><meta name="copyright" content="恒若时光"><title>MySQL必知必会读书笔记 | 恒若时光のblog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '5.3.0'
} </script><meta name="generator" content="Hexo 5.3.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E8%A1%A5%E5%85%85"><span class="toc-text">内容补充</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E4%BA%86%E8%A7%A3SQL"><span class="toc-text">1.了解SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">基本概念</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-MySQL%E7%AE%80%E4%BB%8B"><span class="toc-text">2.MySQL简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8MySQL"><span class="toc-text">3.使用MySQL</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE"><span class="toc-text">4.检索数据</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E6%8E%92%E5%BA%8F%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE"><span class="toc-text">5.排序检索数据</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE"><span class="toc-text">6.过滤数据</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE%E5%8A%A0%E5%BC%BA%E7%89%88"><span class="toc-text">7.过滤数据加强版</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E7%94%A8%E9%80%9A%E9%85%8D%E7%AC%A6%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4"><span class="toc-text">8.用通配符进行过滤</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2"><span class="toc-text">9.用正则表达式进行搜索</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-%E5%88%9B%E5%BB%BA%E8%AE%A1%E7%AE%97%E5%AD%97%E6%AE%B5"><span class="toc-text">10.创建计算字段</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0"><span class="toc-text">11.使用数据处理函数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#12-%E6%B1%87%E6%80%BB%E6%95%B0%E6%8D%AE"><span class="toc-text">12.汇总数据</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#13-%E5%88%86%E7%BB%84%E6%95%B0%E6%8D%AE"><span class="toc-text">13.分组数据</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1115959009,3928225272&amp;fm=26&amp;gp=0.jpg"></div><div class="author-info__name text-center">恒若时光</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">3</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">4</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">4</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://desk-fd.zol-img.com.cn/t_s1024x768c5/g5/M00/0A/0C/ChMkJlkml26ISdS6AASb0-G7sfUAAcmwwO6rFEABJvr18.jpeg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">恒若时光のblog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">主页</a><a class="site-page" href="/archives">文章</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">类别</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">MySQL必知必会读书笔记</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-01-28</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">4.5k</span><span class="post-meta__separator">|</span><span>阅读时长: 15 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="内容补充"><a href="#内容补充" class="headerlink" title="内容补充"></a>内容补充</h1><p>补一个MySQL语句的执行顺序</p>
<p><img src="/2021/01/28/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/../../application/Typora%E5%9B%BE%E7%89%87%E5%8C%85/typora-user-images/image-20210130001805602.png" alt="image-20210130001805602"></p>
<h1 id="1-了解SQL"><a href="#1-了解SQL" class="headerlink" title="1.了解SQL"></a>1.了解SQL</h1><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>数据库和数据库软件：数据库是<strong>存放一组</strong>按某种组织方式组织起来的<strong>数据</strong>的<strong>容器</strong>，而这里说的容器是概念性的，这个容器的物理构成是可以多样的，但一般是以计算机中的文件的形式存在(存放在外存之中)。而数据库软件(比如MySQL),他其实是DBMS，它来负责直接对物理数据库进行操作，包括修改、添加(添加则说明DBMS是创建这个数据库容器的软件)、删除数据库。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">主键和表</span><br><span class="line">	表：关系数据库中的数据以表的方式组织起来存放的。表中的每一列代表一个属性，每一个属性在创建时都要给定数据类型。</span><br><span class="line">	主键：一般在创建一张表时，默认情况下要指定某一列或某些列为主键。主键是用来区分同一张表中不同的行的，特点是：</span><br><span class="line">	<span class="number">1.</span>不同行的主键的值不相同，主键值必须唯一(若是一组列，允许某一列值相同，但是不同出现完全相同的组合方式)</span><br><span class="line">	<span class="number">2.</span>主键值不能为空</span><br></pre></td></tr></table></figure>
<p>SQL也称为结构化查询语言，是用来让DBMS识别其语义，来向数据库发出对应操作的一种语言。SQL由标准委员会制定，大部分DBMS都能识别，但是在实现上会有不同，并且不是完全可移植的，也就是不同的DBMS支持SQL会有不同点。</p>
<a id="more"></a>

<h1 id="2-MySQL简介"><a href="#2-MySQL简介" class="headerlink" title="2.MySQL简介"></a>2.MySQL简介</h1><ul>
<li><code>MySQL</code>是一种基于客户服务器的DBMS，服务器端软件来直接访问和处理数据，一般运行在一个专门的服务器上。而这个服务器端软件也就是我们的DBMS本体，比如<code>MySQL</code>这个软件。DBMS处理数据的请求一半来自于客户端软件，客户端软件包括能连接DBMS的程序设计语言编写的软件等。<strong>当然这个客户端的软件和DBMS也可以部署到同一台机器上</strong></li>
<li><code>MySQL</code>的命令行的命令后面要加上<code>;</code>才能执行</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p <span class="comment">//连接数据库</span></span><br><span class="line">quit;            <span class="comment">//退出数据库连接</span></span><br></pre></td></tr></table></figure>


<h1 id="3-使用MySQL"><a href="#3-使用MySQL" class="headerlink" title="3.使用MySQL"></a>3.使用MySQL</h1><p>使用<code>MySQL</code>之前必须要连接上<code>MySQL</code>,连接时需要提供账户和密码，<code>MySQL</code>内部会存有用户的权限等信息，不同的用户对数据库的操作权限也不同</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">常见命令</span><br><span class="line">show databases;</span><br><span class="line">show tables;</span><br><span class="line">use name; <span class="comment">//使用某个数据库之前要use一样，这个命令相当于切换当前工作数据库</span></span><br><span class="line">show columns from table_name;<span class="comment">//查看表的所有列的属性等</span></span><br><span class="line">describe course_info;<span class="comment">//和上面一样</span></span><br></pre></td></tr></table></figure>
<h1 id="4-检索数据"><a href="#4-检索数据" class="headerlink" title="4.检索数据"></a>4.检索数据</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">select column_name from table; <span class="comment">//查询表中某一列的所有数据，注意返回的不一定是有序的</span></span><br><span class="line"></span><br><span class="line">select c_id,c_name,c_teacher from course_info;<span class="comment">//从一张表中检索多列，都好隔开</span></span><br><span class="line"></span><br><span class="line">select * from course_info;<span class="comment">//查看所有列</span></span><br><span class="line"></span><br><span class="line">select distinct c_score from course_info;<span class="comment">//c_score可能有重复值，distinct修饰符会去重只展示不重复的值</span></span><br><span class="line"></span><br><span class="line">select distinct c_score,department_id from course_info;<span class="comment">//error,对多列去重不可以</span></span><br><span class="line"></span><br><span class="line">select c_teacher from course_info limit <span class="number">5</span>;<span class="comment">//limit接一个数，表述输出从第一行开始的5行</span></span><br><span class="line"></span><br><span class="line">select c_teacher from course_info limit <span class="number">4</span>,<span class="number">5</span>;<span class="comment">//limit接两个数，表示输出从第5行(我试了一下，给的是4，实际结果是从第5行开始算的 )开始的5行</span></span><br><span class="line"></span><br><span class="line">select course_info.c_score from manage_sys.course_info;<span class="comment">//.符号的语法，到指定表找指定列，只不过这里.相当于给出了所属关系。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="5-排序检索数据"><a href="#5-排序检索数据" class="headerlink" title="5.排序检索数据"></a>5.排序检索数据</h1>  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SQL语句都是由子句构成的，order by和from where都是子句</span><br><span class="line">  </span><br><span class="line">select c_remain from course_info order by c_remain;<span class="comment">//是这样的，他先把一个表中的所有记录按c_remain这个属性排序，排序完之后再展示排序之后的记录中的c_remain这一项。先逻辑操作，再显示</span></span><br><span class="line"><span class="string">&quot;先运算————order by,再投影Select&quot;</span></span><br><span class="line">  </span><br><span class="line">select c_remain,c_name,c_score from course_info order by c_remain,c_score;<span class="comment">//输出多列;先按c_remain对表中所有记录排序，然后对按c_remain排序时相等的记录(也仅对相等的记录)再按c_score排序。两次排序之后再展示排序后记录中的c_remain,c_name,c_score这三列</span></span><br><span class="line">  </span><br><span class="line">select c_remain,c_name,c_score from course_info order by c_remain desc,c_score;<span class="comment">//先对所有记录按c_remain降序排序，然后对c_remain排序时相等的那些记录按c_score按c_score升序排序，desc只影响他最接近的那个熟悉</span></span><br><span class="line">  </span><br><span class="line">select c_remain from course_info order by c_remain desc limit <span class="number">1</span>;<span class="comment">//组合技，输出结果最大值</span></span><br></pre></td></tr></table></figure>
<img src="/2021/01/28/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/image-20210125144002097.png" class>

<h1 id="6-过滤数据"><a href="#6-过滤数据" class="headerlink" title="6.过滤数据"></a>6.过滤数据</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">select c_score,c_name from course_info where c_score = <span class="number">3</span>;<span class="comment">//where进行过滤数据</span></span><br><span class="line">select c_score,c_name from course_info where c_department = &#x27;软件学院&#x27;;//如果是字符串用&#x27;&#x27;括起来</span><br><span class="line"></span><br><span class="line">select c_score,c_name from course_info where c_score = <span class="number">3</span> order by c_remain;<span class="comment">//order by和where结合时，应该先过滤然后再排序，否则会出错</span></span><br><span class="line"></span><br><span class="line">where筛选的逻辑有 = &gt; &lt; != &gt;= &lt;= between</span><br><span class="line"></span><br><span class="line">select c_remain from course_info where c_remain between <span class="number">90</span> <span class="keyword">and</span> <span class="number">100</span>;<span class="comment">//筛选范围，注意必须是范围的低端点和高端点。</span></span><br><span class="line"></span><br><span class="line">select c_id from course_info where c_remain is <span class="literal">NULL</span>;<span class="comment">//查询是否有空值，如果某一行的c_remain有空值，就返回</span></span><br></pre></td></tr></table></figure>
<h1 id="7-过滤数据加强版"><a href="#7-过滤数据加强版" class="headerlink" title="7.过滤数据加强版"></a>7.过滤数据加强版</h1><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">and</span>操作符</span><br><span class="line">select c_id from course_info where c_score = 3 and department_id = &#x27;001&#x27;;//where的筛选条件用and逻辑操作符连接</span><br><span class="line"></span><br><span class="line"><span class="keyword">or</span>操作符</span><br><span class="line">select c_id from course_info where c_score = 3 or department_id = &#x27;001&#x27;;//找到所有c_score = 3或者department_id = ‘001’的记录，并返回这些记录中的c_id。其实过程也应该就是在不满足一个条件的记录中再去找那些满足第二个条件的那些记录</span><br></pre></td></tr></table></figure>
<img src="/2021/01/28/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/image-20210125152646309.png" class>

<p>由于SQL语句设定的and操作符计算次序优先级比or要高，所以上面的语句会被解析为3 or (1 and 2)</p>
<img src="/2021/01/28/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/image-20210125152921378.png" class>

<p>消除歧义的方法就是使用括号提升优先级。使用and 和 or组合时，尽量使用()来明确条件的组合。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">select c_remain from course_info where c_remain <span class="title">in</span> <span class="params">(<span class="number">80</span>,<span class="number">88</span>,<span class="number">95</span>)</span></span>;<span class="comment">//()除了提升优先级之外还可以圈出一个集合，比如上面就圈出了一个数量集合，集合中有80 88 95三个元素，和in操作符结合。这个where条件就是找所有剩余数量为80 88 95的记录</span></span><br><span class="line">用in圈定范围比用<span class="keyword">or</span>一个一个连接要好，因为in比<span class="keyword">or</span>快。</span><br><span class="line">    </span><br><span class="line"><span class="function">select c_remain from course_info where c_remain <span class="keyword">not</span> <span class="title">in</span> <span class="params">(<span class="number">80</span>,<span class="number">88</span>,<span class="number">95</span>)</span></span>;<span class="comment">//用not取个反</span></span><br></pre></td></tr></table></figure>
<h1 id="8-用通配符进行过滤"><a href="#8-用通配符进行过滤" class="headerlink" title="8.用通配符进行过滤"></a>8.用通配符进行过滤</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">select c_teacher from course_info where c_department like &#x27;%学院&#x27;;</span><br><span class="line">上面是使用%通配符，他代表任意字符出现任意次数(包括<span class="number">0</span> <span class="number">1</span> ...n)组成的字符串(说人话就可以表示任意的字符，包括空)，这里就是找所有记录的department中，以...学院结尾的记录。</span><br><span class="line"><span class="number">1.</span>上面的 %学院称为搜索模式;</span><br><span class="line"><span class="number">2.</span>搜索语句中使用模式必须加上like操作符(like可做操作符也可以做谓词);</span><br><span class="line">3.通配符可以有多个，也可以出现在搜索模式的任意位置，比如&#x27;%han%&#x27;就是代表所有存在han文本的属性</span><br><span class="line"><span class="number">4.</span>通配符也匹配不了<span class="literal">NULL</span>，检查<span class="literal">NULL</span>值只能用is <span class="literal">NULL</span>;你<span class="string">&#x27;%&#x27;</span>也不能匹配<span class="literal">NULL</span></span><br><span class="line">5.有的MySQL匹配时设置了大小写敏感，那么你&#x27;%H&#x27;是搜索不到&#x27;%h&#x27;的</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x27;_ello&#x27;: -通配符只能匹配一个字，不能多也不能少，即不能出现0次</span><br><span class="line">select c_teacher from course_info where c_department like &#x27;_软件学院&#x27;;//这样就是什么也搜不到</span><br><span class="line"></span><br><span class="line">通配符注意事项</span><br><span class="line"><span class="number">1.</span>尽量少用通配符搜索，比较慢</span><br><span class="line"><span class="number">2.</span>如果要用，尽量避免把通配符放在开头，放在开头搜索是最慢的</span><br></pre></td></tr></table></figure>


<h1 id="9-用正则表达式进行搜索"><a href="#9-用正则表达式进行搜索" class="headerlink" title="9.用正则表达式进行搜索"></a>9.用正则表达式进行搜索</h1><ul>
<li>正则表达式也是一种模式，where语句可以根据这个模式来匹配文本</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.正则表达式匹配及其特点</span></span><br><span class="line">select c_teacher from course_info where c_department regexp &#x27;科学&#x27;;//正则表达式匹配，他会查找所有记录的c_department,检查其文本中是否有&#x27;科学&#x27;这个模式，即是否有&#x27;科学&#x27;这个文本，有的话就返回。即查看属性值中是否有这个正则表达式模式的文本，用的关键字是regexp</span><br><span class="line">1.&#x27;科学&#x27;：这个同样也叫做模式</span><br><span class="line">2.&#x27;.科学&#x27;：这个.是正则表达式支持的符号，代表任意一个字符，和&#x27;-&#x27;通配符一样，仅能且必须要代表一个符号，不能空。</span><br><span class="line"><span class="number">3.</span>正则表达式的匹配默认不大小写敏感，如果要明确区分大小写，加上binary关键字。</span><br><span class="line">select c_teacher from course_info where c_name regexp binary &#x27;WuHanyi&#x27;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.通配符模式匹配的特点(比较着看)</span></span><br><span class="line">select c_teacher from course_info where c_department like &#x27;科学&#x27;;//而这个是查找所有记录，查看他们的属性值是否为&#x27;科学&#x27;。即用like就是看属性值是否和我这个模式匹配</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.or连接符</span></span><br><span class="line">select c_teacher from course_info where c_department regexp &#x27;科学 | 学院 | 软件&#x27;;// |表示或运算，连接</span><br><span class="line"></span><br><span class="line"><span class="comment">//4.[]符号</span></span><br><span class="line">select c_teacher from course_info where c_department regexp &#x27;[软件科学]学院&#x27;;//这个[软件科学]的意思是  [软件|科学]，[]括起来的字符也是一种或逻辑，这里让找的c_department中出现&#x27;软件学院&#x27; | &#x27;科学学院&#x27;的文本。</span><br><span class="line"></span><br><span class="line"><span class="comment">//5.[]和 |的对比</span></span><br><span class="line">select c_teacher from course_info where c_department regexp &#x27;软件 | 科学学院&#x27;;//如果这样写,意思就是查找出现&#x27;软件&#x27; | &#x27;科学学院&#x27; 文本的记录</span><br><span class="line"></span><br><span class="line"><span class="comment">//6.[]里面的^符号</span></span><br><span class="line">&#x27;[^软件科学]学院&#x27;:这个就是找除&#x27;软件学院&#x27;和&#x27;科学学院&#x27;以外的所有文本</span><br><span class="line"></span><br><span class="line"><span class="comment">//7.范围匹配</span></span><br><span class="line">&#x27;[1-5] hello&#x27;:范围匹配，也就是&#x27;[12345] hello&#x27;这个模式的简写</span><br><span class="line">&#x27;[a-p]&#x27; hello&#x27; :同范围匹配</span><br><span class="line">&#x27;[1-5\\.]&#x27;:范围匹配，也就是&#x27;[12345\\.] hello&#x27;</span><br><span class="line"></span><br><span class="line"><span class="comment">//8.匹配特殊字符</span></span><br><span class="line">如果要匹配有.符号的文本，用&#x27;.&#x27;不行，因为他代表所有字符。所以匹配特殊字符需要加上转义符号&#x27;\\&#x27;，转义符号可以原本有特殊意义的符号变为他字符层面的意思。所以匹配的模式是&#x27;\\.&#x27;  ;一般语言的转移符号都是一个\，但是mysql需要2个</span><br></pre></td></tr></table></figure>
<img src="/2021/01/28/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/image-20210128165926938.png" class>

<img src="/2021/01/28/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/image-20210128165951012.png" class>

<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">上面都是正则表达式定义的特殊符号，举个例子</span><br><span class="line">select name from student_info where id regexp &#x27;[:alnum:]&#123;4&#125;&#x27;</span><br><span class="line">这个[:alnum:]就是任意数字或字母，而&#123;4&#125;就是指定匹配4次，所以这个意思就是匹配任意数字或字母重复出现4次的文本，比如&#x27;1111&#x27;,&#x27;aaaa&#x27;都是</span><br></pre></td></tr></table></figure>
<img src="/2021/01/28/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/image-20210128171243689.png" class>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">上面都是定位符，前面说的都是从属性值的任意位置开始匹配，如果想从指定位置开始匹配就要使用上面的定位符</span><br><span class="line">select name from s_info where id regexp &#x27;^[1-5//.] hello&#x27;;</span><br><span class="line">这个就是在属性的开头，检查有没有&#x27;[1-5//.] hello&#x27;的文本</span><br><span class="line">    ^在[]里面和外面有不同的涵义</span><br><span class="line">    </span><br><span class="line"><span class="comment">//正则表达式的测试，也就是不依赖数据库单纯测试表达式是否可行</span></span><br><span class="line">    select &#x27;hello world&#x27; regexp &#x27;d&#x27;</span><br><span class="line">    这个测试式子只会返回<span class="number">0</span>或<span class="number">1</span>，有就<span class="number">1</span>，无<span class="number">0</span>,上面式子返回的就是<span class="number">1</span></span><br></pre></td></tr></table></figure>


<h1 id="10-创建计算字段"><a href="#10-创建计算字段" class="headerlink" title="10.创建计算字段"></a>10.创建计算字段</h1><ul>
<li>所谓计算字段就是本身并不存在于数组库中(即数据库中本没有这一列)，是由DBMS按照输入的SQL语句(应该说是MySQL支持的特殊的SQL语句)来将数据库中的数据进行拼接等逻辑操作处理后返回的特殊数据(特殊处理后的数据)。</li>
<li>使用计算字段就是因为大多数情况下，并不是直接获取数据库中的数据。比如数据库中有商家店名、商店地址这两列，我想要获得店名(商店地址)这样的一种数据，数据库中没有，这时候就需要DBMS将数据库中的数据特殊处理后生成符合我们要求的数据，也就是计算字段。</li>
<li><strong>综上，用函数处理的一堆数据称为计算字段</strong></li>
<li>其实我们也可以在客户端对数据进行组合处理，但是肯定没有DBMS干这事快。</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Concat函数拼接生成计算字段</span></span><br><span class="line">select Concat(s_name,&#x27;的&#x27;,c_name,&#x27;成绩为&#x27;,grade) from grade_info;</span><br><span class="line">结果就是返回<span class="string">&quot;s_name的c_name成绩为grade&quot;</span>这样一种数据</span><br><span class="line"></span><br><span class="line"><span class="comment">//Trim函数，来去除某一列数据的空格</span></span><br><span class="line">select Concat(RTrim(s_name),&#x27;的&#x27;,c_name,&#x27;成绩为&#x27;,grade) from grade_info;//比如这个就是去掉了s_name右边的空格。以此类推还有LTrim,Trim(两边的空格都去掉)</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用as关键字给计算字段取个别名</span></span><br><span class="line">select Concat(s_name,&#x27;的&#x27;,c_name,&#x27;成绩为&#x27;,grade) as info from grade_info;//给这一串数据取名为info，目前不知道有啥用</span><br><span class="line"></span><br><span class="line"><span class="comment">//真&quot;计算&quot;字段，支持+-*/，可以用()来区分优先级</span></span><br><span class="line">select c_score*c_remain as score from course_info;</span><br></pre></td></tr></table></figure>
<h1 id="11-使用数据处理函数"><a href="#11-使用数据处理函数" class="headerlink" title="11.使用数据处理函数"></a>11.使用数据处理函数</h1><p>本章只要知道有这么个东西，真正用再来查</p>
<p>大多数的DBMS都支持下列三类函数</p>
<ol>
<li>文本处理函数</li>
<li>日期和时间处理函数</li>
<li>数值处理函数</li>
</ol>
<img src="/2021/01/28/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/image-20210128182110172.png" class>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">这里面注意的就是Soundex(),有点邪乎，他是找发音匹配的数据</span><br><span class="line">比如数据库有个人名为Steve，但是你输入成Stev是找不到的，但是Soundex(Stev)就能找到Steve,感觉没啥用</span><br></pre></td></tr></table></figure>
<img src="/2021/01/28/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/image-20210128182641137.png" class>

<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">举一个例子，比如数据库中有一列是日期这一项，但是日期是年/月/日 时/分/秒 格式来存放的，你要查找时，完全不记得时/分/秒，你只记得，是几号。那么查找就可以用Data()函数</span><br><span class="line">select ord_num,ord_id from order where Data(order_date) = &#x27;2020/1/27&#x27;;//这个感觉很有用</span><br><span class="line"></span><br><span class="line">select ord_num,ord_id from order where Year(order_date) = &#x27;2020&#x27; and Month(order_date) = 9;//查询2020年9月的所有订单，组合技，也挺有用的</span><br></pre></td></tr></table></figure>
<img src="/2021/01/28/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/image-20210128184022029.png" class>

<p>上面是常见的数值处理函数，各大DBMS这个函数好像是一致的</p>
<h1 id="12-汇总数据"><a href="#12-汇总数据" class="headerlink" title="12.汇总数据"></a>12.汇总数据</h1><img src="/2021/01/28/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/image-20210128191736465.png" class>

<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//AVG返回列的平均值</span></span><br><span class="line">select AVG(grade) from grade_info where s_id = &#x27;sa20225068&#x27;;//返回特定用户的在grade这一列的平均成绩</span><br><span class="line">AVG忽略值为<span class="literal">NULL</span>的列</span><br><span class="line"></span><br><span class="line"><span class="comment">//Count()确定表中行的数目或者符合特定条件的行的数目</span></span><br><span class="line"><span class="number">1.</span>Count(*):返回表的行数，不管表值是否为<span class="literal">NULL</span>,即*时不忽略<span class="literal">NULL</span></span><br><span class="line"><span class="number">2.</span>Count(column):返回特定列不为<span class="literal">NULL</span>的行数</span><br><span class="line"></span><br><span class="line"><span class="comment">//MAX(column),MIN(column),SUM(column)的用法都是相同的</span></span><br><span class="line"><span class="function">select <span class="title">MAX</span><span class="params">(c_score*c_remain)</span> from course_info</span>;<span class="comment">//处理普通用法之外还可以这么用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//聚集不同的值，对于SUM,AVG,Count来说有用</span></span><br><span class="line">select AVG(distinct grade) from grade_info where s_id = &#x27;sa20225068&#x27;;//返回特定条件的grade中，不重复的值的平均值</span><br><span class="line">Count只能Count(distinct column),不能Count(distinct *);</span><br><span class="line">SUM(distinct c_score*c_remain);这种也是可以的</span><br><span class="line"></span><br><span class="line"><span class="comment">//这些聚集函数还能一起用</span></span><br><span class="line">select AVG(grade) as s_avg,</span><br><span class="line">	   SUM(grade) as s_grd,</span><br><span class="line">from grade_info where s_id = &#x27;sa20225068&#x27;;//列属性之间加上,号，而不是换行加,</span><br></pre></td></tr></table></figure>


<h1 id="13-分组数据"><a href="#13-分组数据" class="headerlink" title="13.分组数据"></a>13.分组数据</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.创建分组</span></span><br><span class="line">select c_name,s_id,Count(s_id) as &#x27;学生成绩条数&#x27; from grade_info group by s_id;</span><br><span class="line">上面意思是将所以记录按照s_id进行分组，s_id有几个不重复的，就分几组。记录分组之后，他给你返回的数据都是按组进行返回的。分组后的Count(s_id)也是由系统自动按组计数的</span><br><span class="line">    如下图所示，按s_id分组之后只有两组，所有返回的数据都是两行。虽然每一组c_name的取值也有多个，但是按组返回，返回的就是每一组s_id的第一个c_name(这个应该是随机的，我也只是看到现象)</span><br><span class="line"> </span><br><span class="line"><span class="comment">//2.注意点</span></span><br><span class="line"><span class="number">1.</span>GROUP BY子句必须出现在WHERE子句之后，ORDER BY子句之前。</span><br><span class="line"><span class="number">2.</span>如果分组列中具有<span class="literal">NULL</span>值，则<span class="literal">NULL</span>将作为一个分组返回。如果列中有多行<span class="literal">NULL</span>值，它们将分为一组。</span><br><span class="line"><span class="number">3.</span>除聚集计算语句外，SELECT语句中的每个列都必须在GROUP BY子句中给出。(那我下面截图中的示例语句是错的)正确应该是</span><br><span class="line">    select c_name,s_id,Count(s_id) as &#x27;学生成绩条数&#x27; from grade_info group by s_id,c_name;</span><br><span class="line">	我是按s_id分组的，所以最后每个s_id就可以代表一个分组，最后投影投的是分组，也就是s_id</span><br></pre></td></tr></table></figure>
<img src="/2021/01/28/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/image-20210128204853697.png" class>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//3.过滤分组，MySQL使用having子句过滤分组；where子句处理不了分组，只能过滤行</span></span><br><span class="line">select s_id,Count(s_id) from grade_info where grade &gt; <span class="number">10</span> <span class="function">group by s_id having <span class="title">Count</span><span class="params">(s_id)</span> &gt; 3</span>;</span><br><span class="line">这个筛选顺序是这样的：先去找出所有grade大于<span class="number">10</span>的行，然后再把找出的这些行按s_id分组，然后计算count(s_id),此时Count(s_id)就是每个分组的s_id数目了，最后再筛选出分组中(s_id)个数大于<span class="number">2</span>的分组，最后再提取分组的s_id，计算字段。(再提醒一句，select子句的列除了计算字段外其他都要是group子句中的列)</span><br><span class="line"></span><br><span class="line"><span class="comment">//4.group by和order by结合</span></span><br><span class="line">select s_id,AVG(grade) <span class="function">as a_grd from grade_info group by s_id having <span class="title">Count</span><span class="params">(s_id)</span> &gt; 1 order by a_grd</span>;</span><br><span class="line">先按s_id分组，然后按分组，然后计算分组的Count(s_id)之后筛选，最后再将筛选出来的分组按照计算字段a_grd排序，最后投影。<span class="string">&quot;注意这里面排序貌似可以不用select子句后面的属性，但是把，你是输出这些玩意，肯定要按你投影的某个属性来排序，所以这里是按出现在select子句后面的计算字段来排序的&quot;</span></span><br><span class="line">注：还有一点，我终于知道了给计算字段取别名有啥用了</span><br></pre></td></tr></table></figure>
<p>最后再总结一下select子句的各个关键字：</p>
<img src="/2021/01/28/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/image-20210128214816717.png" class>

</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">恒若时光</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2021/01/28/MySQL必知必会读书笔记/">http://example.com/2021/01/28/MySQL必知必会读书笔记/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com">恒若时光のblog</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><a class="post-meta__tags" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">读书笔记</a></div><nav id="pagination"><div class="next-post pull-right"><a href="/2021/01/27/2021%E6%AF%8F%E6%97%A5%E8%AE%A1%E5%88%92/"><span>2021每日计划</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: '152ddcae291378830dfc',
  clientSecret: '303f9a5f5325e6d1dabb9819aac27403b6d03001',
  repo: 'wuhanyi1.github.io',
  owner: 'wuhanyi1',
  admin: 'wuhanyi1',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN'
})
gitalk.render('gitalk-container')</script></div></div><footer class="footer-bg" style="background-image: url(https://desk-fd.zol-img.com.cn/t_s1024x768c5/g5/M00/0A/0C/ChMkJlkml26ISdS6AASb0-G7sfUAAcmwwO6rFEABJvr18.jpeg)"><div class="layout" id="footer"><div class="copyright">&copy;2021 By 恒若时光</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>